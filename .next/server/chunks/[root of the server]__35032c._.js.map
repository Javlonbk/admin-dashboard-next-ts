{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///media/javlonbek/New%20Volume/nextjs_dashboard/app/query/route.ts"],"sourcesContent":["import { db } from \"@vercel/postgres\";\nimport { NextResponse } from \"next/server\";\n\nasync function listInvoices() {\n  const client = await db.connect();\n\n  try {\n    // Execute the query to fetch invoice amounts and customer names\n    const data = await client.sql`\n      SELECT \n        invoices.amount, \n        customers.name \n      FROM \n        invoices\n      JOIN \n        customers \n      ON \n        invoices.customer_id = customers.id\n      WHERE \n        invoices.amount = 666;\n    `;\n\n    return data.rows; // Return rows of data\n  } catch (error) {\n    console.error(\"Error querying invoices:\", error);\n    throw error; // Rethrow error to be handled by the caller\n  } finally {\n    client.release(); // Ensure the client is released back to the pool\n  }\n}\n\nexport async function GET() {\n  try {\n    // Fetch and return the list of invoices\n    const invoices = await listInvoices();\n    return NextResponse.json({ invoices });\n  } catch (error) {\n    // Return a 500 error if something goes wrong\n    if (error instanceof Error) {\n      return NextResponse.json({ error: error.message }, { status: 500 });\n    } else {\n      return NextResponse.json({ error: \"An unknown error occurred\" }, { status: 500 });\n    }\n  }\n}\n"],"names":[],"mappings":";;;AAAA;AACA;AADA;;;AAGA,eAAe;IACb,MAAM,SAAS,MAAM,yRAAA,CAAA,KAAE,CAAC,OAAO;IAE/B,IAAI;QACF,gEAAgE;QAChE,MAAM,OAAO,MAAM,OAAO,GAAG,CAAC;;;;;;;;;;;;IAY9B,CAAC;QAED,OAAO,KAAK,IAAI,EAAE,sBAAsB;IAC1C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,OAAO,4CAA4C;IAC3D,SAAU;QACR,OAAO,OAAO,IAAI,iDAAiD;IACrE;AACF;AAEO,eAAe;IACpB,IAAI;QACF,wCAAwC;QACxC,MAAM,WAAW,MAAM;QACvB,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE;QAAS;IACtC,EAAE,OAAO,OAAO;QACd,6CAA6C;QAC7C,IAAI,iBAAiB,OAAO;YAC1B,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,MAAM,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACnE,OAAO;YACL,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA4B,GAAG;gBAAE,QAAQ;YAAI;QACjF;IACF;AACF"}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}